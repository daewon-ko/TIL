# 251027



### Spring ResourceHandler

- Spring에서 서버사이드 리소스(Image, JS,CSS, HTML)과 같은 정적 리소스를 처리하는 Handler

- addResourceHandlers

  - 특정 정적자원에 대해서 편리한 방식으로 리소스를 서빙하기 위해 사용
  - request가 특정 path로 시작된다고 할때, 상대경로를 지정할 수 있음
  - 사용자가 임의로 지정한 경로 또는 classPath 이하의 경로를 지정할 수 있다
    - classPath이외의 웹앱의 특정 디렉토리 이하를 resource를 공급하는 경로로 지정해줄 수 있음1
      - 아래 예시의 '/public'경로가 그 예시 
      - "file"을 resourceHandler로 처리해주려면 아래와 같이 처리 가능
  
  ```java
  @Configuration
  public class WebConfiguration implements WebMvcConfigurer {
  
  	@Override
  	public void addResourceHandlers(ResourceHandlerRegistry registry) {
  		registry.addResourceHandler("/resources/**")
  				.addResourceLocations("/public", "classpath:/static/")
              	.addResourceLocations("file:"+System.getProperty("user.dir")+"/upload/files/")
  				.setCacheControl(CacheControl.maxAge(Duration.ofDays(365)));
  	}
  }
  ```
  
  /resources이하 경로에 대해서 /public 또는 /static에 위치한 정적 리소스를 찾는다. 
  
  또한, setCacheControl을 기입한 경우에 HTTP의 'Last-Modified' Header를 통해 브라우저에서 1년 후 만료로 설정가능하다. 
  
  

### ResourceResolver

- 요청 경로에 대해 실제 리소스를 '어떻게 '찾을지를 결정
  - 상기의 addResourceHandler 메서드에서 resourceChain(true)를 켜면,  

- 또한 ResourceResolver 및 ResourceTransformer 구현체의 체인을 지원

