# 251016



### 클래스 다이어그램 실선 / 점선 

- 항상 헷갈리곤 한다.

- 실선

  - 연관관계, 집합관계, 합성관계, 상속관계

- 점선

  - 의존, 인터페이스 구현

- | 구분                              | 선 종류              | 의미                          | 예시                           |
  | --------------------------------- | -------------------- | ----------------------------- | ------------------------------ |
  | **Association (연관)**            | 실선                 | 클래스 간 실제 참조 관계      | `Order ──> Customer`           |
  | **Aggregation (집합)**            | 실선 + 빈 마름모     | 전체-부분 (부분 독립 가능)    | `Team ◇──> Player`             |
  | **Composition (합성)**            | 실선 + 채워진 마름모 | 전체-부분 (부분 종속)         | `House ◆──> Room`              |
  | **Generalization (상속)**         | 실선 + 삼각형 화살표 | 부모 클래스 상속              | `Dog ─▷ Animal`                |
  | **Realization (인터페이스 구현)** | 점선 + 삼각형 화살표 | 인터페이스 구현               | `MyServiceImpl - -▷ MyService` |
  | **Dependency (의존)**             | 점선 + 화살표        | 메서드, 지역변수 등 임시 의존 | `Controller - - - > Service`   |

- CF) 연관 !=의존

  - 연관은 실제 클래스 상에서 참조하는 것을 말함
    - 가령 인스턴스변수로 참조하는 것

  - 의존은 지역변수, 메서드 매개변수에서 참조하는 것을 의미



- EX) 실제 구현예시



![image-20251016083738881](D:\Typora\images\image-20251016083738881.png)

- UsernamePasswordAuthenticationToken은 AbstractAuthenticationToken을 '상속'하고, 
  AbstractAuthenticationToken은 Authentication Interface를 '구현'함(Spring Security 구현)

  

---

### AuthenticationManager와 AuthenticationProvider

- AuthenticationProvider 
  - 실제 인증을 수행하는 구현체
- AuthenticationManager
  - 인증 요청을 받아 적절한 Provider에게 인증을 위임하는 관리자
  - 구현체인 ProviderManager 내부에 List형태로 AuthenticateionProvider를 가지고 있음
  - AuthenticationProvider의 authenticate() 메서드로 요청을 위임함

![image-20251016084612393](D:\Typora\images\image-20251016084612393.png)

(provider.authenticate(authentication)을 수행하는 것을 볼 수 있다.)



---



### DelegatingFilterProxy

키워드들

- DelegatingFilterProxy
- CompositeFilterChainProxy
- FilterChainProxy
- FilterChain

- spring.web 내에 위치



- DelegatingFilterProxy는 Spring Security 관련 라이브러리를 사용하면 자동으로 서블릿 필터로 등록된다.
  - DelegatingFilterChainProxyRegistrationBean에서 생성한다.
  - 서버 실행시, DelegatingFilterProxy는 FilterChainProxy에게 요청을 위임한다.
- 그러나 DelegatingFilterProxy는 반드시 Spring Security에 한정되어 사용되는 것은 아니지만, Security라이브러리에서 자동으로 생성되므로 보통 흔히 사용됨.
- 통상 SecurityConfig 클래스를 작성하고 커스텀하게 'SecurityFilterChain'을 Bean으로 등록하는데, 해당 SecurityFilterChain 내에 등록하는FIlter들은 모두 Spring Bean으로 자동으로 등록된다.
- 따라서 해당 SecurityFilterChain 내에 등록되는 모든 FIlter들은 DI, AOP, @Transactional등 SPring  



### FilterRegistrationBean

- Filter 사용시에 사용됨

---



- SecurityFilterChain을 Custom하게 등록하면 아래와 같이 
  - 사용자가 직접 지정한 classpath의 filterChain을 읽어온다.



### ![image-20251016131950329](D:\Typora\images\image-20251016131950329.png)

---

`DelegatingFilterProxy`와 `FilterRegistrationBean`의     주요 차이점은 다음과 같습니다:

다.  