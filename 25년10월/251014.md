# [TIL] 251014





### SSR 방식에서도 Nginx를 두는게 유효한 이유는?

- WAS가 기동되는 포트 번호를 숨길 수 있음
  - 포트를 숨길 수 있다(리버스 프록시 기능으로)

- SSL 계층 도입 시에 nginx앞단까지 SSL을 적용하고 그 이후에는 HTTP를 단순하게 적용할 수 있다. 





---



### Spring Security Config의 filterChain Bean 내부의permitAll()

- 인증/인가 구현시 편의상 Spring Security를 사용한다.
- Spring Security는 버전에 따라 다르지만 Spring Security 6기준으로 SecurityFilterChain을 Bean으로 등록한다.
  - Bean등록시 특정 url요청에 대해서는 인증 없이 자원에 접근 가능하도록 permitAll()옵션을 준다.
- 주의해야할 점은 permitAll()을 사용한다고 해도 '**인가**'만 건드릴뿐, 필터 자체의 실행과는 독립적이다.

```

// SecurityConfig class
@Bean
public SecurityFilterChain filterChain(HttpSecurity http,..){

http.cors()
	.csrf()
    .authorizeHttpRequests(auth -> 
    	auth.requestMatchers(
    	"특정경로1",
    	"특정경로2",
    	"특정경로3"
    	..).permitAll()
    	)

}
```



- 위와 같이 permitAll() 옵션을 열어준다고 해도 특정 경로에 대한 접근을 허가할뿐, 특정 경로가 Security등에서 등록한 인증/인가 필터를 타지 않는다는 것이 아니다!

- 특정 리소스에 대해서 필터를 태우고 싶지 않다면, 해당 필터 그 자체에서 메서드를 별도로 작성해줘야함

  - 다음과같이 OnceperRequestFilter를 상속했다면 아래의 메서드를 Override가능 

  <img width="794" height="316" alt="Image" src="https://github.com/user-attachments/assets/306a78b0-0892-4d3f-b612-f549ba33c8c6" />



