251201

 ### Spring Batch

배치

- 내가 하고 있는 작업을 어디까지 했는지 파악
- 이미 했던 일을 중복해서 하지 않게 파악
  - 배치는 보통 주기적으로 스케줄러에 잡혀 실행되기 때문에



- Batch에서는 하나의 청크가 곧 하나의 트랜잭션 단위

- 테스트
- faultTolerant()
- retry(어떤 Exception?)
- retryLimit()
  - retry의 회수
- skip()
  - Skip을 어떤예

- SkipListener

  - Step 정의시에

  - faultTolerant.skip()을 설정 + 예외 발생시, 

  - Processor에서 하나의 Row에 대한 실패처리를 할때

    - 즉, Processor에서 Insert,Insert,Merge등과 관련되어서 

      ```
      public interface SkipListener<I, O> extends StepListener {
          void onSkipInRead(Throwable t);
          void onSkipInProcess(I item, Throwable t);
          void onSkipInWrite(O item, Throwable t);
      }
      
      ```

      - onSkipInProcess에서 
        - 한 row에 대해서 새로운 Transaction_REQUIRED_NEW를 열고 Woori_CARD_LOG에 'F'로 기록하는 과정

- JobExecutionListenerSupport

- StepExecutionListenerSupport





-  Writer에서 예외 발생시?
  
  

![image](https://user-images.githubusercontent.com/45073750/229532116-537bd523-cf08-44d6-87af-fdfaf8c17977.png)

- retry()

  - 특정 예외정의

- limit()

  - 횟수정의

  

  

